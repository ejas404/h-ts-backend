import"./chunk-NHIVJRMF.js";import{a as q}from"./chunk-TWQULGK7.js";import{$ as b,C as B,D as V,Ea as ce,F as se,Fc as Z,Ga as z,Gc as Y,Hc as G,J as c,K as h,Lc as J,M as H,O as M,P as E,Pa as pe,Q as d,Qa as de,Ra as $,S as D,Sa as he,Ta as ue,U as A,Uc as X,V as a,Vc as be,W as s,Wc as k,X as f,Xa as C,Xb as me,Xc as w,Yc as ge,Zc as ve,_c as ee,b as y,bd as _e,cd as ye,da as re,ea as ae,ec as U,ed as Te,ga as _,gd as Ce,ha as L,hc as K,hd as we,ia as le,id as xe,ja as S,jb as ie,ka as F,kc as Q,kd as Ie,ld as Oe,na as R,oa as P,oc as W,p as g,s as I,uc as fe,w as p,x as O,xa as j,yb as N}from"./chunk-PO7YGL3B.js";import{f as T}from"./chunk-QFHF65OI.js";var Se=(()=>{let i=class i{constructor(e,t){this.dialogRef=e,this.store=t,this.destroy$=new y,this.tutorNameList=[],this.tableHeaders=[{title:"Course",tBodyKey:"title"},{title:"filter",tBodyKey:"tutor"},{title:"add",tBodyKey:"courseLink"}]}ngOnInit(){this.setCourseData()}setCourseData(){this.store.select(G).pipe(g(this.destroy$)).subscribe({next:e=>{this.courseList=e.courseDetails,this.courseListStore=e.courseDetails,this.convertFilterKeys(e.tutorCourses),this.setTutorList()},error:e=>{console.log(e)}})}filterCourse(e){if(typeof e!="string")return;if(e==="all"){this.courseList=this.courseListStore;return}let t=this.courseListStore.slice();t=t.filter(o=>o.tutor._id===e),this.courseList=t,this.setTutorList()}convertFilterKeys(e){this.tutorCourse=e.map(t=>({value:t._id,text:t.name}))}setTutorList(){let e=[];for(let t of this.courseList)e.push(t.tutor.name),this.tutorNameList=e}addCourse(){this.dialogRef.open(X,{data:{calledFor:"courseAdd"}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};i.\u0275fac=function(t){return new(t||i)(h(N),h(C))},i.\u0275cmp=p({type:i,selectors:[["app-admin-courses"]],decls:2,vars:4,consts:[[1,"overflow-y-scroll","h-full","w-full"],[3,"tHeaders","tBody","dropFilterList","tutorNames","addEvent","filter"]],template:function(t,o){t&1&&(a(0,"div",0)(1,"admin-table",1),b("addEvent",function(){return o.addCourse()})("filter",function(r){return o.filterCourse(r)}),s()()),t&2&&(c(1),d("tHeaders",o.tableHeaders)("tBody",o.courseList)("dropFilterList",o.tutorCourse)("tutorNames",o.tutorNameList))},dependencies:[k]});let n=i;return n})();function qe(n,i){if(n&1&&(a(0,"div",10)(1,"div",11)(2,"div",12),f(3,"img",13),R(4,"customImageUrl"),s(),a(5,"h1",14),_(6),s()(),a(7,"div",15)(8,"p",14),_(9),R(10,"titlecase"),s(),a(11,"p"),_(12),R(13,"titlecase"),s()()()),n&2){let u=i.$implicit;c(3),re("src",P(4,4,u.course.cover),se),c(3),le("",u.count,"+"),c(3),L(P(10,6,u.course.title)),c(3),L(P(13,8,u.tutorDetails.name))}}console.log("admin module loading printed dashboard");var ke=(()=>{let i=class i{constructor(e,t){this.store=e,this.salesService=t,this.destroy$=new y,this.popularCourseList=[],this.chartLoad=new H}ngOnInit(){this.fetchStudentList(),this.fetchTutorList(),this.fetchCourseList(),this.getPopularCourses(),this.fetchChartDetails()}fetchStudentList(){this.store.select(Z).pipe(g(this.destroy$)).subscribe(e=>{this.userList=e,this.students=this.userList.filter(t=>!t.isBlocked).length})}fetchTutorList(){this.store.select(Y).pipe(g(this.destroy$)).subscribe({next:e=>{this.tutorList=e,this.tutors=this.tutorList.filter(t=>!t.isBlocked).length}})}fetchCourseList(){this.store.select(G).pipe(g(this.destroy$)).subscribe({next:e=>{this.courseList=e.courseDetails,this.courses=this.courseList.length},error:e=>{console.log(e)}})}getPopularCourses(){this.salesService.getPopularCourses().pipe(g(this.destroy$)).subscribe({next:e=>{this.popularCourseList=e.popularCourses}})}fetchChartDetails(){this.salesService.getChartDetails().pipe(g(this.destroy$)).subscribe({next:e=>{this.pieChartList=e.pieChart,this.chartLoad.emit(e.pieChart)},error:e=>{console.error("Error fetching chart details:",e)}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};i.\u0275fac=function(t){return new(t||i)(h(C),h(w))},i.\u0275cmp=p({type:i,selectors:[["app-admin-dashboard"]],outputs:{chartLoad:"chartLoad"},features:[S([w])],decls:14,vars:8,consts:[[1,"pt-3","px-4"],[1,"cards","grid","grid-cols-3"],[3,"title","count"],[1,"popular-courses","mt-4"],[1,"font-bold","my-2"],[1,"course_list","grid","grid-cols-3"],["class","relative group my-2 me-8 p-2 rounded-lg bg-slate-200",4,"ngFor","ngForOf"],[1,"charts","mt-3","flex"],["routerLink","/admin/sales"],[3,"loadEvent"],[1,"relative","group","my-2","me-8","p-2","rounded-lg","bg-slate-200"],[1,"top","flex","justify-between"],[1,"img-template","w-[4rem]","h-[3rem]","rounded","overflow-hidden"],["alt","",1,"w-full","h-full","object-cover",3,"src"],[1,"font-bold"],[1,"ms-1","my-1","flex","flex-col","justify-between"]],template:function(t,o){t&1&&(a(0,"section",0)(1,"div",1),f(2,"admin-dashboard-top-card",2)(3,"admin-dashboard-top-card",2)(4,"admin-dashboard-top-card",2),s(),a(5,"div",3)(6,"h1",4),_(7,"Popular Courses"),s(),a(8,"div",5),A(9,qe,14,10,"div",6),s()()(),a(10,"div",7)(11,"a",8),f(12,"bargraph-chart-reusable"),s(),f(13,"pie-chart-reusable",9),s()),t&2&&(c(2),d("title","students")("count",o.students),c(1),d("title","tutors")("count",o.tutors),c(1),d("title","courses")("count",o.courses),c(5),d("ngForOf",o.popularCourseList),c(4),d("loadEvent",o.chartLoad))},dependencies:[$,j,ge,ve,ee,ce,me]});let n=i;return n})();function Ze(n,i){if(n&1&&(a(0,"a",3)(1,"li"),_(2),s()()),n&2){let u=i.$implicit;ae("routerLink","/admin/others/",u.path,""),c(2),L(u.title)}}var Ee=(()=>{let i=class i{constructor(){this.otherComponents=[{title:"upcoming courses",path:"upcoming-courses"},{title:"account",path:"account"}]}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=p({type:i,selectors:[["admin-other-topbar"]],decls:3,vars:1,consts:[[1,"border-b","border-light-gray"],[1,"flex","children:px-2","children:py-2","children:text-sm"],["routerLinkActive","shadow text-link-blue border-b-2 border-b-link-blue font-semibold",3,"routerLink",4,"ngFor","ngForOf"],["routerLinkActive","shadow text-link-blue border-b-2 border-b-link-blue font-semibold",3,"routerLink"]],template:function(t,o){t&1&&(a(0,"section",0)(1,"ul",1),A(2,Ze,3,2,"a",2),s()()),t&2&&(c(2),d("ngForOf",o.otherComponents))},dependencies:[$,he,j]});let n=i;return n})();var De=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=p({type:i,selectors:[["app-admin-settings"]],decls:3,vars:0,consts:[[1,"p-2"]],template:function(t,o){t&1&&(a(0,"section",0),f(1,"admin-other-topbar")(2,"router-outlet"),s())},dependencies:[pe,Ee]});let n=i;return n})();var Ae=(()=>{let i=class i{constructor(e,t){this.store=e,this.confirmBox=t,this.destroy$=new y,this.tableHeaders=[{title:"Name",tBodyKey:"name"},{title:"Email",tBodyKey:"email"},{title:"Restrict",tBodyKey:"restrict"},{title:"Delete",tBodyKey:"delete"}]}ngOnInit(){this.fetchStudentList()}fetchStudentList(){this.store.select(Z).pipe(g(this.destroy$)).subscribe(e=>{this.userList=e})}deleteUser(e){return T(this,null,function*(){typeof e!="string"||!(yield this.confirmBox.call("Are your sure about deleting this user"))||this.store.dispatch(U({id:e,user:"users"}))})}blockUser(e){return T(this,null,function*(){typeof e!="string"||!(yield this.confirmBox.call("Are your sure about block this user"))||this.store.dispatch(K({user_id:e,user:"users"}))})}unblockUser(e){return T(this,null,function*(){typeof e!="string"||!(yield this.confirmBox.call("Are your sure about unblock this user"))||this.store.dispatch(Q({user_id:e,user:"users"}))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};i.\u0275fac=function(t){return new(t||i)(h(C),h(q))},i.\u0275cmp=p({type:i,selectors:[["app-admin-students"]],decls:2,vars:2,consts:[[1,"overflow-y-scroll","h-full","w-full"],[3,"tHeaders","tBody","block","unblock","delete"]],template:function(t,o){t&1&&(a(0,"div",0)(1,"admin-table",1),b("block",function(r){return o.blockUser(r)})("unblock",function(r){return o.unblockUser(r)})("delete",function(r){return o.deleteUser(r)}),s()()),t&2&&(c(1),d("tHeaders",o.tableHeaders)("tBody",o.userList))},dependencies:[k]});let n=i;return n})();var Be=(()=>{let i=class i{constructor(e,t){this.store=e,this.confirmBox=t,this.destroy$=new y,this.userList=[],this.tableHeaders=[{title:"Name",tBodyKey:"name"},{title:"Email",tBodyKey:"email"},{title:"Restrict",tBodyKey:"restrict"},{title:"Delete",tBodyKey:"delete"}]}ngOnInit(){this.fetchTutorList()}fetchTutorList(){this.store.select(Y).pipe(g(this.destroy$)).subscribe({next:e=>{this.userList=e}})}deleteUser(e){return T(this,null,function*(){typeof e!="string"||!(yield this.confirmBox.call("Are your sure about deleting this tutor"))||this.store.dispatch(U({id:e,user:"tutors"}))})}blockUser(e){return T(this,null,function*(){typeof e!="string"||!(yield this.confirmBox.call("Are your sure about block this tutor"))||this.store.dispatch(K({user_id:e,user:"tutors"}))})}unblockUser(e){return T(this,null,function*(){typeof e!="string"||!(yield this.confirmBox.call("Are your sure about unblock this tutor"))||this.store.dispatch(Q({user_id:e,user:"tutors"}))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};i.\u0275fac=function(t){return new(t||i)(h(C),h(q))},i.\u0275cmp=p({type:i,selectors:[["app-admin-tutors"]],decls:2,vars:2,consts:[[1,"overflow-y-scroll","h-full","w-full"],[3,"tHeaders","tBody","block","unblock","delete"]],template:function(t,o){t&1&&(a(0,"div",0)(1,"admin-table",1),b("block",function(r){return o.blockUser(r)})("unblock",function(r){return o.unblockUser(r)})("delete",function(r){return o.deleteUser(r)}),s()()),t&2&&(c(1),d("tHeaders",o.tableHeaders)("tBody",o.userList))},dependencies:[k]});let n=i;return n})();var Ve=(()=>{let i=class i{constructor(e,t){this.dialogRef=e,this.adminCourseService=t}ngOnInit(){this.adminCourseService.getUpcomingCourses().subscribe({next:e=>{this.upcomingList=e.upcomingCourses},error:e=>{console.log(e)}})}addBtnClicked(){this.dialogRef.open(X,{data:{calledFor:"upcoming"}})}};i.\u0275fac=function(t){return new(t||i)(h(N),h(W))},i.\u0275cmp=p({type:i,selectors:[["app-upcoming-courses"]],features:[S([W])],decls:4,vars:2,consts:[[1,"add-btn","text-end","mt-1"],[3,"size","click"],[3,"courseList"]],template:function(t,o){t&1&&(a(0,"section")(1,"div",0)(2,"admin-add-btn",1),b("click",function(){return o.addBtnClicked()}),s()(),f(3,"small-course-list",2),s()),t&2&&(c(2),d("size","6"),c(1),d("courseList",o.upcomingList))},dependencies:[be,Ce]});let n=i;return n})();var He=(()=>{let i=class i{constructor(e){this.router=e}twoFactorAuth(e){}logout(){sessionStorage.removeItem("auth_token"),this.router.navigateByUrl("/admin/login")}};i.\u0275fac=function(t){return new(t||i)(h(de))},i.\u0275cmp=p({type:i,selectors:[["app-account"]],decls:3,vars:1,consts:[[3,"twoFactEnable"],[3,"styleClass","click"]],template:function(t,o){t&1&&(a(0,"twofactor-auth",0),b("twoFactEnable",function(r){return o.twoFactorAuth(r)}),s(),a(1,"common-btn-reusable",1),b("click",function(){return o.logout()}),_(2,"Log Out"),s()),t&2&&(c(1),d("styleClass","bg-admin-primary text-white text-sm"))},dependencies:[fe,we]});let n=i;return n})();var Me=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=p({type:i,selectors:[["app-banner"]],decls:2,vars:0,template:function(t,o){t&1&&(a(0,"p"),_(1,"banner works!"),s())}});let n=i;return n})();var Fe=(()=>{class n extends J{static \u0275fac=(()=>{let u;return function(t){return(u||(u=V(n)))(t||n)}})();static \u0275cmp=p({type:n,selectors:[["ChevronLeftIcon"]],standalone:!0,features:[M,F],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M9.61296 13C9.50997 13.0005 9.40792 12.9804 9.3128 12.9409C9.21767 12.9014 9.13139 12.8433 9.05902 12.7701L3.83313 7.54416C3.68634 7.39718 3.60388 7.19795 3.60388 6.99022C3.60388 6.78249 3.68634 6.58325 3.83313 6.43628L9.05902 1.21039C9.20762 1.07192 9.40416 0.996539 9.60724 1.00012C9.81032 1.00371 10.0041 1.08597 10.1477 1.22959C10.2913 1.37322 10.3736 1.56698 10.3772 1.77005C10.3808 1.97313 10.3054 2.16968 10.1669 2.31827L5.49496 6.99022L10.1669 11.6622C10.3137 11.8091 10.3962 12.0084 10.3962 12.2161C10.3962 12.4238 10.3137 12.6231 10.1669 12.7701C10.0945 12.8433 10.0083 12.9014 9.91313 12.9409C9.81801 12.9804 9.71596 13.0005 9.61296 13Z","fill","currentColor"]],template:function(e,t){e&1&&(B(),a(0,"svg",0),f(1,"path",1),s()),e&2&&(D(t.getClassNames()),E("aria-label",t.ariaLabel)("aria-hidden",t.ariaHidden)("role",t.role))},encapsulation:2})}return n})();var Re=(()=>{class n extends J{static \u0275fac=(()=>{let u;return function(t){return(u||(u=V(n)))(t||n)}})();static \u0275cmp=p({type:n,selectors:[["ChevronRightIcon"]],standalone:!0,features:[M,F],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z","fill","currentColor"]],template:function(e,t){e&1&&(B(),a(0,"svg",0),f(1,"path",1),s()),e&2&&(D(t.getClassNames()),E("aria-label",t.ariaLabel)("aria-hidden",t.ariaHidden)("role",t.role))},encapsulation:2})}return n})();var Pe=(()=>{class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=O({type:n});static \u0275inj=I({imports:[z]})}return n})();var je=(()=>{class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=O({type:n});static \u0275inj=I({imports:[z,ie,Pe,_e,ye,Fe,Re,ie]})}return n})();var te={1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"};var ze=(()=>{let i=class i{constructor(e){this.salesService=e,this.destroy$=new y,this.chartLoad=new H}ngOnInit(){this.fetchChartDetails()}fetchChartDetails(){this.salesService.getChartDetails().pipe(g(this.destroy$)).subscribe({next:e=>{this.orderList=e.orders,this.setChart()},error:e=>{console.error("Error fetching chart details:",e)}})}dateSelected(e){let{year:t,month:o,date:l}=e;this.setChart(t,o,l)}setChart(e,t,o){let l=this.filterDatas(e,t,o),r=Object.keys(l),m=Object.values(l);this.chartLoad.emit({data:m,categories:r})}filterDatas(e,t,o){let l=e||new Date().getFullYear(),r=t||new Date().getMonth();return!t&&!o?this.getYearly(l):o?this.getDaily(l,r,o):this.getMonthly(l,r)}getYearly(e){let t={};return this.orderList.filter(l=>new Date(l.createdAt).getFullYear()===e).forEach(l=>{let r=new Date(l.createdAt).getMonth()+1;t[te[r]]=t[te[r]]?t[te[r]]+l.amountPayable:l.amountPayable}),t}getMonthly(e,t){let o={};return this.orderList.filter(r=>{let m=new Date(r.createdAt).getFullYear(),x=new Date(r.createdAt).getMonth()+1;if(e===m&&t===x)return r}).forEach(r=>{let m=new Date(r.createdAt).getDate();o[m]=o[m]?o[m]+r.amountPayable:r.amountPayable}),o}getDaily(e,t,o){let l={};return this.orderList.filter(m=>{let x=new Date(m.createdAt).getFullYear(),$e=new Date(m.createdAt).getMonth()+1,Ne=new Date(m.createdAt).getDate();if(e===x&&t===$e&&o===Ne)return m}).forEach(m=>{let x=new Date(m.createdAt).getHours()+":"+new Date(m.createdAt).getMinutes();l[x]=l[x]?l[x]+m.amountPayable:m.amountPayable}),l}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};i.\u0275fac=function(t){return new(t||i)(h(w))},i.\u0275cmp=p({type:i,selectors:[["app-admin-sales-page"]],outputs:{chartLoad:"chartLoad"},features:[S([w])],decls:4,vars:1,consts:[[1,"overflow-y-auto"],[3,"selectEvent"],[1,"px-2"],[3,"loadEvent"]],template:function(t,o){t&1&&(a(0,"section",0)(1,"dashboard-date-picker",1),b("selectEvent",function(r){return o.dateSelected(r)}),s(),a(2,"div",2),f(3,"bargraph-chart-reusable",3),s()()),t&2&&(c(3),d("loadEvent",o.chartLoad))},dependencies:[Ie,ee]});let n=i;return n})();var nt=[{path:"",component:ke},{path:"students",component:Ae},{path:"tutors",component:Be},{path:"courses",component:Se},{path:"sales",component:ze},{path:"others",component:De,children:[{path:"upcoming-courses",component:Ve},{path:"account",component:He},{path:"banner",component:Me},{path:"",redirectTo:"upcoming-courses",pathMatch:"full"}]}],Xi=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=O({type:i}),i.\u0275inj=I({imports:[ue.forChild(nt),Te,Oe,xe,je]});let n=i;return n})();export{Xi as AdminDashboardModule};
